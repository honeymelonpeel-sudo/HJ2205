local DECRYPTION_TABLE = {
    ["a"] = "Å½", ["A"] = "Ã‚", ["b"] = "q", ["B"] = "ÃŠ", ["c"] = "Ä¿", ["C"] = "Ã‹", 
    ["d"] = "g", ["D"] = "ÃŒ", ["e"] = "Ä•", ["E"] = "Ã", ["f"] = "Ã«", ["F"] = "Ã", 
    ["g"] = "Å", ["G"] = "Ã", ["h"] = "C", ["H"] = "Ã", ["i"] = "Â¡", ["I"] = "Ã‘", 
    ["j"] = "Ä‘", ["J"] = "Ã’", ["k"] = "â„¢", ["K"] = "Ã“", ["l"] = "Ä…", ["L"] = "Ã”", 
    ["m"] = "Ã¿", ["M"] = "Ã•", ["n"] = "Â", ["N"] = "Ã–", ["o"] = "", ["O"] = "Ã—", 
    ["p"] = "Ä“", ["P"] = "Ã˜", ["q"] = "ÃŒ", ["Q"] = "Ã™", ["r"] = "", ["R"] = "Ãš", 
    ["s"] = "Ã›", ["S"] = "Ã›", ["t"] = "Ä¿", ["T"] = "Ãœ", ["u"] = "Â‡", ["U"] = "Ã", 
    ["v"] = "j", ["V"] = "Ã", ["w"] = "O", ["W"] = "ÃŸ", ["x"] = "Ã‘", ["X"] = "Ã ", 
    ["y"] = "Å‘", ["Y"] = "Ã¡", ["z"] = "Ã¼", ["Z"] = "Ã¢",
    
    ["0"] = "v", ["1"] = "", ["2"] = "Â±", ["3"] = "Âº", ["4"] = "p", ["5"] = "Â–", 
    ["6"] = "", ["7"] = "Â¤", ["8"] = "Æ’", ["9"] = "1",
    
    ["("] = "Â©", [")"] = "@", ["="] = "Â†", ["["] = "Âµ", ["]"] = "Ä™", ["{"] = "â‚¬", 
    ["}"] = "ÄŒ", [","] = "Ä", ["."] = "}", [":"] = "Ä ", [";"] = "Å™", ["\""] = "Â”", 
    ["'"] = "", ["/"] = ")", ["\\"] = "", ["|"] = "Å–", ["`"] = "&", ["~"] = "", 
    ["!"] = "Ä", ["@"] = "Äƒ", ["#"] = "Â¦", ["$"] = "Ä—", ["%"] = "H", ["^"] = "Â™", 
    ["&"] = "O", ["*"] = "Ã†", ["_"] = "Ã»", ["-"] = "H", ["+"] = "Ã§", ["<"] = "Ã¥", 
    [">"] = "Ä¢", ["?"] = "Â", [" "] = "Âº"
}

local REVERSE_TABLE = {}
for k, v in pairs(DECRYPTION_TABLE) do
    REVERSE_TABLE[v] = k
end

local function decrypt(encryptedText)
    local result = ""
    for i = 1, #encryptedText do
        local char = encryptedText:sub(i, i)
        local decryptedChar = REVERSE_TABLE[char]
        if decryptedChar then
            result = result .. decryptedChar
        else
            result = result .. char
        end
    end
    return result
end

local function decryptAndExecute(encryptedCode)
    local decryptedCode = decrypt(encryptedCode)
    local func, err = loadstring(decryptedCode)
    if func then
        return func()
    else
        error("è§£å¯†æ‰§è¡Œé”™è¯¯: " .. tostring(err))
    end
end

return decryptAndExecute
